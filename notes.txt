#code-server 
#upgrade by installing over old:
curl -fsSL https://code-server.dev/install.sh | sh
#Change port back to 8079 after reboot:
nano ~/.config/code-server/config.yaml


#nginx
$ sudo systemctl start/stop/restart nginx
# dev config.
# 10.0.0.234:8001/dashboard
sudo nano /etc/nginx/sites-available/brettspill.dev.conf
#prod config. brettspill.holtebu.eu
sudo nano /etc/nginx/sites-available/brettspill.dev.conf


#Dyndns
sudo nano /etc/ddclient.conf
#Endre intervall:
sudo nano /etc/default/ddclient 
sudo systemctl start/stop/restart ddclient.service 

# Sambashare 
sudo nano /etc/samba/smb.conf
# Setup bruker med passord, koblet til systembruker:
sudo smbpasswd -a username


#Add user to docker user group
sudo usermod -aG docker $USER


#Install docker-compose
COMPOSE_VERSION=2.4.1
#curl -L "https://github.com/docker/compose/releases/download/v$COMPOSE_VERSION/docker-compose-linux-x86_64" --create-dirs -o $HOME/.docker/cli-plugins/docker-compose
sudo curl -L "https://github.com/docker/compose/releases/download/v$COMPOSE_VERSION/docker-compose-linux-x86_64" -o /usr/local/bin/docker-compose
sudo chmod +x /usr/local/bin/docker-compose


#Update poetry, use fresh install
curl -sSL https://raw.githubusercontent.com/python-poetry/poetry/master/get-poetry.py | python - 

#Using virtualenv brettspill-YFU5uXvi-py3.9 in C:\Users\H140917\AppData\Local\pypoetry\Cache\virtualenvs\brettspill-py-YFU5uXvi-py3.10
#If not present create a new virtualenv: poetry install
#config poetry
poetry config --list
poetry config cache-dir "c:/Dev/poetry/cache"


#Utvikling
#start WSL og cd /mnt/c/Dev/projects/Brettspill/brettspill-py
docker build -t brettspill-py:latest .

#react utvikling
npm run dev

# Lage cert filer for lokal SSL: openssl req -x509 -newkey rsa:4096 -keyout key.pem -out cert.pem -days 365 -nodes
# FLyttes til app
docker ps -aq | xargs docker stop | xargs docker rm
docker-compose -f docker-compose.dev.yml up --build
http://brettspill.localhost:8008/lobby/

# Migrations
docker compose -f docker-compose.dev.yml exec brettspill python manage.py makemigrations

Browser: http://brettspill.localhost:8008/brettspill/
Shell: docker compose -f docker-compose.dev.yml exec brettspill python manage.py shell
Superuser: docker compose -f docker-compose.dev.yml exec brettspill python manage.py createsuperuser



#Tracke nettverksbruk
sudo tcptrack -i enp34s0

